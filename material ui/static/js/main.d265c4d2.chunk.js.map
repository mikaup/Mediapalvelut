{"version":3,"sources":["util/MediaAPI.js","components/Tr.js","components/Table.js","views/Front.js","views/Single.js","components/Nav.js","views/Login.js","views/Profile.js","views/Logout.js","App.js","index.js"],"names":["apiUrl","login","username","password","settings","method","headers","Content-Type","body","JSON","stringify","fetch","then","response","json","register","user","filterPic","user_id","pics","filter","pic","kuva","mediaUrl","Img","props","console","log","_props$pic","thumbnails","screenshot","title","react_default","a","createElement","src","w160","alt","Tr","_props$pic2","description","file_id","Tr_Img","Link","to","Table","rows","picArray","map","item","i","components_Tr","key","Front","Fragment","components_Table","Single","state","file","_this2","this","id","getSingleMedia","match","params","setState","filename","Component","Nav","index_es","button","component","icons_index_es","primary","checkLogin","Login","email","full_name","picture","toggleForm","userAvailable","handleLoginSubmit","evt","preventDefault","_this","doLogin","handleRegisterSubmit","setUser","localStorage","setItem","token","history","push","handleInputChange","target","value","name","prevState","Object","objectSpread","defineProperty","checkUserAvailable","getItem","x-access-token","onSubmit","type","placeholder","onChange","Profile","_props$user","Logout","removeItem","App","kuvat","Promise","all","_this3","BrowserRouter","basename","container","md","xs","components_Nav","Route","path","render","views_Front","assign","views_Profile","exact","views_Login","views_Logout","ReactDOM","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.d265c4d2.chunk.js","sourcesContent":["const apiUrl = 'http://media.mw.metropolia.fi/wbma/';\r\n\r\nconst getAllMedia = () => {\r\n  return fetch(apiUrl + 'media/').then(response => {\r\n    return response.json();\r\n  }).then(json => {\r\n    console.log(json);\r\n    return Promise.all(json.map(pic => {\r\n      return fetch(apiUrl + 'media/' + pic.file_id).then(response => {\r\n        return response.json();\r\n      });\r\n    })).then(pics => {\r\n      console.log(pics);\r\n      return pics;\r\n    });\r\n  });\r\n};\r\n\r\nconst getSingleMedia = (id) => {\r\n  return fetch(apiUrl + 'media/' + id).then(response => {\r\n    return response.json();\r\n  });\r\n};\r\n\r\nconst login = (username, password) => {\r\n  const settings = {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify({username, password}),\r\n  };\r\n  return fetch(apiUrl + 'login', settings).then(response => {\r\n    return response.json();\r\n  });\r\n};\r\n\r\nconst register = (user) => {\r\n  const settings = {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify(user),\r\n  };\r\n  return fetch(apiUrl + 'users', settings).then(response => {\r\n    return response.json();\r\n  });\r\n};\r\n\r\nconst getUser = (token) => {\r\n  const settings = {\r\n    headers: {\r\n      'x-access-token': token,\r\n    },\r\n  };\r\n  return fetch(apiUrl + 'users/user', settings).then(response => {\r\n    return response.json();\r\n  });\r\n};\r\n\r\nconst getProfilepic = () => {\r\n  return fetch(apiUrl + 'tags/profile').then(response => {\r\n    return response.json();\r\n  });\r\n};\r\n\r\nconst filterPic = (user_id) => {\r\n  return getProfilepic().then((pics) => {\r\n    return pics.filter(pic => {\r\n      let kuva = null;\r\n      if (pic.user_id === user_id) {\r\n        kuva = pic;\r\n      }\r\n      return kuva;\r\n    });\r\n  });\r\n};\r\n\r\nexport {getAllMedia, getSingleMedia, login, register, getUser, filterPic};","import React from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst mediaUrl = 'http://media.mw.metropolia.fi/wbma/uploads/';\r\n\r\nconst Img = (props) => {\r\n    console.log('props', props);\r\n    const {thumbnails, screenshot, title} = props.pic;\r\n    if (thumbnails !== null) {\r\n        return <img src={mediaUrl + thumbnails.w160} alt={title}/>;\r\n    } else {\r\n        return <img src={mediaUrl + screenshot} alt={title}/>;\r\n    }\r\n};\r\n\r\nconst Tr = (props) => {\r\n    const {title, description, file_id} = props.pic;\r\n    return (\r\n        <tr>\r\n            <td>\r\n                <Img pic={props.pic}/>\r\n            </td>\r\n            <td>\r\n                <h3>{title}</h3>\r\n                <p>{description}</p>\r\n            </td>\r\n            <td>\r\n                <Link to={'single/' + file_id}>View</Link>\r\n            </td>\r\n        </tr>\r\n    );\r\n};\r\n\r\nTr.propTypes = {\r\n    pic: PropTypes.object,\r\n};\r\nexport default Tr;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Tr from './Tr';\r\n\r\nconst Table = (props) => {\r\n    const rows = props.picArray.map((item, i) => {\r\n        return <Tr key={i} pic={item}/>;\r\n    });\r\n    return (\r\n        <table>\r\n            <tbody>\r\n            {rows}\r\n            </tbody>\r\n        </table>\r\n    );\r\n};\r\n\r\nTable.propTypes = {\r\n    picArray: PropTypes.array,\r\n};\r\n\r\nexport default Table;","import React from 'react';\r\nimport Table from '../components/Table';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst Front = (props) => {\r\n    const {picArray} = props;\r\n    return (\r\n        <React.Fragment>\r\n            <Table picArray={picArray}/>\r\n        </React.Fragment>\r\n    );\r\n};\r\n\r\nFront.propTypes = {\r\n    picArray: PropTypes.array,\r\n};\r\n\r\nexport default Front;","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {getSingleMedia} from '../util/MediaAPI';\r\n\r\nclass Single extends Component {\r\n    mediaUrl = 'http://media.mw.metropolia.fi/wbma/uploads/';\r\n    state = {\r\n        file: 'http://placekitten.com/200/200',\r\n    };\r\n\r\n    componentDidMount() {\r\n        const {id} = this.props.match.params;\r\n        getSingleMedia(id).then(pic => {\r\n            console.log(pic);\r\n            this.setState({file: pic});\r\n        });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <img src={this.mediaUrl + this.state.file.filename} alt={this.state.file.title}/>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nSingle.propTypes = {\r\n    match: PropTypes.object,\r\n};\r\n\r\nexport default Single;","import React from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\nimport {List, ListItem,ListItemIcon,ListItemText} from '@material-ui/core';\r\nimport {Home,AccountBox,Input,Launch} from '@material-ui/icons';\r\n\r\nconst Nav = (props) => {\r\n    return (\r\n        <nav>\r\n            <List>\r\n                <ListItem button component={Link} to='/home'>\r\n                    <ListItemIcon>\r\n                        <Home/>\r\n                    </ListItemIcon>\r\n                <ListItemText primary='Home'/>\r\n                </ListItem>\r\n                {props.checkLogin() &&\r\n                <React.Fragment>\r\n                    <ListItem button component={Link} to='/profile'>\r\n                        <ListItemIcon>\r\n                            <AccountBox/>\r\n                        </ListItemIcon>\r\n                        <ListItemText primary='Profile'/>\r\n                        {/*<Link to='/profile'>Profile</Link>*/}\r\n                    </ListItem>\r\n                    <ListItem button component={Link} to='/logout'>\r\n                        <ListItemIcon>\r\n                            <Launch/>\r\n                        </ListItemIcon>\r\n                        <ListItemText primary='Logout'/>\r\n                        {/*<Link to='/logout'>Logout</Link>*/}\r\n                    </ListItem>\r\n                </React.Fragment>\r\n                }\r\n                {!props.checkLogin() &&\r\n                <ListItem button component={Link} to='/'>\r\n                    <ListItemIcon>\r\n                        <Input/>\r\n                    </ListItemIcon>\r\n                    <ListItemText primary='Login'/>\r\n                    {/*<Link to='/'>Login</Link>*/}\r\n                </ListItem>\r\n                }\r\n\r\n            </List>\r\n        </nav>\r\n    );\r\n};\r\n\r\nNav.propTypes = {\r\n    checkLogin: PropTypes.func,\r\n};\r\n\r\nexport default Nav;","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {login, register, getUser} from '../util/MediaAPI';\r\n\r\nclass Login extends Component {\r\n  state = {\r\n    user: {\r\n      username: '',\r\n      password: '',\r\n      email: '',\r\n      full_name: '',\r\n      picture: ''\r\n    },\r\n    toggleForm: true,\r\n    userAvailable: true,\r\n  };\r\n\r\n  handleLoginSubmit = (evt) => {\r\n    evt.preventDefault();\r\n    this.doLogin();\r\n  };\r\n\r\n  handleRegisterSubmit = (evt) => {\r\n    evt.preventDefault();\r\n    register(this.state.user).then(user => {\r\n      console.log(user);\r\n      this.doLogin();\r\n    });\r\n  };\r\n\r\n  doLogin = () => {\r\n    login(this.state.user.username, this.state.user.password).then(response => {\r\n      console.log(response);\r\n      this.props.setUser(response.user);\r\n      localStorage.setItem('token', response.token);\r\n      this.props.history.push('/home');\r\n    });\r\n  };\r\n\r\n  handleInputChange = (evt) => {\r\n    const target = evt.target;\r\n    const value = target.value;\r\n    const name = target.name;\r\n\r\n    console.log(value, name);\r\n\r\n    this.setState((prevState) => {\r\n      return {\r\n        user: {\r\n          ...prevState.user,\r\n          [name]: value,\r\n        },\r\n      };\r\n    });\r\n  };\r\n\r\n  checkUserAvailable = (evt) => {\r\n    // tarkasta onko käyttäjätunnus vapaa\r\n    // jos ei, tee esim alert()\r\n  };\r\n\r\n  componentDidMount() {\r\n    console.log(localStorage.getItem('token'));\r\n    if (localStorage.getItem('token') !== null) {\r\n      getUser(localStorage.getItem('token')).then(response => {\r\n        this.props.setUser(response);\r\n        this.props.history.push('/home');\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n        <React.Fragment>\r\n          <h1>Login</h1>\r\n          <form onSubmit={this.handleLoginSubmit}>\r\n            <input type=\"text\" name=\"username\" placeholder=\"username\"\r\n                   value={this.state.user.username}\r\n                   onChange={this.handleInputChange}/>\r\n            <br/>\r\n            <input type=\"password\" name=\"password\" placeholder=\"password\"\r\n                   value={this.state.user.password}\r\n                   onChange={this.handleInputChange}/>\r\n            <br/>\r\n            <button type=\"submit\">Login</button>\r\n          </form>\r\n          <h1>Register</h1>\r\n          <form onSubmit={this.handleRegisterSubmit}>\r\n            <input type=\"text\" name=\"username\" placeholder=\"username\"\r\n                   value={this.state.user.username}\r\n                   onChange={this.handleInputChange}/>\r\n            <br/>\r\n            <input type=\"password\" name=\"password\" placeholder=\"password\"\r\n                   value={this.state.user.password}\r\n                   onChange={this.handleInputChange}/>\r\n            <br/>\r\n            <input type=\"email\" name=\"email\" placeholder=\"email\"\r\n                   value={this.state.user.email}\r\n                   onChange={this.handleInputChange}/>\r\n            <br/>\r\n            <input type=\"text\" name=\"full_name\" placeholder=\"full name\"\r\n                   value={this.state.user.full_name}\r\n                   onChange={this.handleInputChange}/>\r\n            <br/>\r\n            <button type=\"submit\">Login</button>\r\n          </form>\r\n        </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nLogin.propTypes = {\r\n  setUser: PropTypes.func,\r\n  history: PropTypes.object,\r\n};\r\n\r\nexport default Login;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst mediaUrl = 'http://media.mw.metropolia.fi/wbma/uploads/';\r\n\r\nconst Profile = (props) => {\r\n  const {username, email, full_name, picture} = props.user;\r\n  return (\r\n      <React.Fragment>\r\n        <h1>Profile</h1>\r\n        <p>Username: {username}</p>\r\n        <p>email: {email}</p>\r\n        <p>Full name: {full_name}</p>\r\n        <img src={mediaUrl + picture.filename} alt='käyttäjä kuva'/>\r\n\r\n      </React.Fragment>\r\n  );\r\n};\r\n\r\nProfile.propTypes = {\r\n  user: PropTypes.object,\r\n};\r\n\r\nexport default Profile;","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass Logout extends Component {\r\n\r\n    componentDidMount() {\r\n        this.props.setUser(null);\r\n        localStorage.removeItem('token');\r\n        this.props.history.push('/');\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n                <h1>Logout</h1>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nLogout.propTypes = {\r\n    setUser: PropTypes.func,\r\n    history: PropTypes.object,\r\n};\r\n\r\nexport default Logout;","import React, {Component} from 'react';\r\nimport {BrowserRouter as Router, Route} from 'react-router-dom';\r\nimport {filterPic, getAllMedia} from './util/MediaAPI';\r\nimport Front from './views/Front';\r\nimport Single from './views/Single';\r\nimport Nav from './components/Nav';\r\nimport Login from './views/Login';\r\nimport Profile from './views/Profile';\r\nimport Logout from './views/Logout';\r\nimport {Grid} from '@material-ui/core';\r\n\r\nclass App extends Component {\r\n\r\n  state = {\r\n    picArray: [],\r\n    user: null,\r\n  };\r\n\r\n  setUser = (user) => {\r\n    this.setState({user});\r\n    filterPic(user.user_id).then((kuvat) => {\r\n      console.log(kuvat);\r\n      this.setState((prevState) => {\r\n        return {\r\n          user: {\r\n            ...prevState.user,\r\n            picture: kuvat[0],\r\n          },\r\n        };\r\n      });\r\n    })\r\n  };\r\n\r\n  checkLogin = () => {\r\n    return this.state.user !== null;\r\n  };\r\n\r\n  componentDidMount() {\r\n    getAllMedia().then((pics) => {\r\n      console.log(pics);\r\n      this.setState({picArray: pics});\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n        <Router basename='/~mikaup/'>\r\n          <Grid container>\r\n            <Grid item md={2} xs={12}>\r\n              <Nav checkLogin={this.checkLogin}/>\r\n            </Grid>\r\n            <Grid item md={10} xs={12}>\r\n              <Route path=\"/home\" render={(props) => (\r\n                  <Front {...props} picArray={this.state.picArray}/>\r\n              )}/>\r\n\r\n              <Route path=\"/single/:id\" component={Single}/>\r\n\r\n              <Route path=\"/profile\" render={(props) => (\r\n                  <Profile {...props} user={this.state.user}/>\r\n              )}/>\r\n\r\n              <Route exact path=\"/\" render={(props) => (\r\n                  <Login {...props} setUser={this.setUser}/>\r\n              )}/>\r\n\r\n              <Route path=\"/logout\" render={(props) => (\r\n                  <Logout {...props} setUser={this.setUser}/>\r\n              )}/>\r\n            </Grid>\r\n          </Grid>\r\n        </Router>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(<App/>, document.getElementById('root'));"],"sourceRoot":""}